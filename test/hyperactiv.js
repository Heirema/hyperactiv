!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.hyperactiv=t()}(this,function(){"use strict";const e=new Set;return{observe:function(t,{props:n=null,ignore:o=null}={}){return t.__observeMap=new Map,new Proxy(t,{get(s,r){const{__observeMap:u}=t;if(n&&!n.includes(r)||o&&o.includes(r))return t[r];u.has(r)||u.set(r,new Set);for(let t of e){const e=u.get(r);e.add(t),u.set(r,e)}return t[r]},set(e,s,r){const{__observeMap:u}=t;if(t[s]=r,n&&!n.includes(s)||o&&o.includes(s))return!0;if(u.has(s)){const e=u.get(s);for(let t of e)t.__disposed?e.delete(t):t()}return!0}})},computed:function(t,{autoRun:n=!0}={}){const o=new Proxy(t,{apply:function(t,n,s){e.add(o),s.push({capture:{stop:()=>e.delete(o),resume:()=>e.add(o)}});const r=t.apply(n,s);return r instanceof Promise?r.then(()=>{e.delete(o)}).catch(t=>{throw e.delete(o),t}):(e.delete(o),r)}});return n&&o(),o},dispose:e=>e.__disposed=!0}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHlwZXJhY3Rpdi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbXB1dGVkU2V0ID0gbmV3IFNldCgpXG5cbmNvbnN0IGNvbXB1dGVkID0gZnVuY3Rpb24oZnVuLCB7wqBhdXRvUnVuID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwcm94eSA9IG5ldyBQcm94eShmdW4sIHtcbiAgICAgICAgYXBwbHk6IGZ1bmN0aW9uKHRhcmdldCwgdGhpc0FyZywgYXJnc0xpc3QpIHtcbiAgICAgICAgICAgIGNvbXB1dGVkU2V0LmFkZChwcm94eSlcblxuICAgICAgICAgICAgYXJnc0xpc3QucHVzaCh7XG4gICAgICAgICAgICAgICAgY2FwdHVyZSA6e1xuICAgICAgICAgICAgICAgICAgICBzdG9wOiAoKSA9PiBjb21wdXRlZFNldC5kZWxldGUocHJveHkpLFxuICAgICAgICAgICAgICAgICAgICByZXN1bWU6ICgpID0+IGNvbXB1dGVkU2V0LmFkZChwcm94eSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0YXJnZXQuYXBwbHkodGhpc0FyZywgYXJnc0xpc3QpXG5cbiAgICAgICAgICAgIGlmKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkU2V0LmRlbGV0ZShwcm94eSlcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFNldC5kZWxldGUocHJveHkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29tcHV0ZWRTZXQuZGVsZXRlKHByb3h5KVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgaWYoYXV0b1J1bikgeyBwcm94eSgpIH1cbiAgICByZXR1cm4gcHJveHlcbn1cblxuY29uc3QgZGlzcG9zZSA9IF8gPT4gXy5fX2Rpc3Bvc2VkID0gdHJ1ZVxuXG5jb25zdCBvYnNlcnZlID0gZnVuY3Rpb24ob2JqLCB7IHByb3BzID0gbnVsbCwgaWdub3JlID0gbnVsbCB9ID0ge30pIHtcbiAgICBvYmouX19vYnNlcnZlTWFwID0gbmV3IE1hcCgpXG5cbiAgICByZXR1cm4gbmV3IFByb3h5KG9iaiwge1xuICAgICAgICBnZXQoXywgcHJvcCkge1xuICAgICAgICAgICAgY29uc3QgeyBfX29ic2VydmVNYXAgfSA9IG9ialxuXG4gICAgICAgICAgICBpZigocHJvcHMgJiYgIXByb3BzLmluY2x1ZGVzKHByb3ApKSB8fCAoaWdub3JlICYmIGlnbm9yZS5pbmNsdWRlcyhwcm9wKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ialtwcm9wXVxuXG4gICAgICAgICAgICBpZighX19vYnNlcnZlTWFwLmhhcyhwcm9wKSkge1xuICAgICAgICAgICAgICAgIF9fb2JzZXJ2ZU1hcC5zZXQocHJvcCwgbmV3IFNldCgpKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IobGV0IGNvbXB1dGVkIG9mIGNvbXB1dGVkU2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0ID0gX19vYnNlcnZlTWFwLmdldChwcm9wKVxuICAgICAgICAgICAgICAgIHNldC5hZGQoY29tcHV0ZWQpXG4gICAgICAgICAgICAgICAgX19vYnNlcnZlTWFwLnNldChwcm9wLCBzZXQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqW3Byb3BdXG4gICAgICAgIH0sXG4gICAgICAgIHNldChfLCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgeyBfX29ic2VydmVNYXAgfSA9IG9ialxuICAgICAgICAgICAgb2JqW3Byb3BdID0gdmFsdWVcblxuICAgICAgICAgICAgaWYoKHByb3BzICYmICFwcm9wcy5pbmNsdWRlcyhwcm9wKSkgfHwgKGlnbm9yZSAmJiBpZ25vcmUuaW5jbHVkZXMocHJvcCkpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG5cbiAgICAgICAgICAgIGlmKF9fb2JzZXJ2ZU1hcC5oYXMocHJvcCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXBlbmRlbnRzID0gX19vYnNlcnZlTWFwLmdldChwcm9wKVxuICAgICAgICAgICAgICAgIGZvcihsZXQgZGVwZW5kZW50IG9mIGRlcGVuZGVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZGVwZW5kZW50Ll9fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVudHMuZGVsZXRlKGRlcGVuZGVudClcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVudCgpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIG9ic2VydmUsXG4gICAgY29tcHV0ZWQsXG4gICAgZGlzcG9zZVxufSJdLCJuYW1lcyI6WyJjb21wdXRlZFNldCIsIlNldCIsIm9ic2VydmUiLCJvYmoiLCJwcm9wcyIsImlnbm9yZSIsIl9fb2JzZXJ2ZU1hcCIsIk1hcCIsIlByb3h5IiwiW29iamVjdCBPYmplY3RdIiwiXyIsInByb3AiLCJpbmNsdWRlcyIsImhhcyIsInNldCIsImNvbXB1dGVkIiwiZ2V0IiwiYWRkIiwidmFsdWUiLCJkZXBlbmRlbnRzIiwiZGVwZW5kZW50IiwiX19kaXNwb3NlZCIsImRlbGV0ZSIsImZ1biIsImF1dG9SdW4iLCJwcm94eSIsImFwcGx5IiwidGFyZ2V0IiwidGhpc0FyZyIsImFyZ3NMaXN0IiwicHVzaCIsImNhcHR1cmUiLCJzdG9wIiwicmVzdW1lIiwicmVzdWx0IiwiUHJvbWlzZSIsInRoZW4iLCJjYXRjaCIsImVyciIsImRpc3Bvc2UiXSwibWFwcGluZ3MiOiJzTEFBQSxNQUFNQSxFQUFjLElBQUlDLFdBaUZwQkMsUUE1Q1ksU0FBU0MsR0FBS0MsTUFBRUEsRUFBUSxLQUFJQyxPQUFFQSxFQUFTLFVBR25ELE9BRkFGLEVBQUlHLGFBQWUsSUFBSUMsSUFFaEIsSUFBSUMsTUFBTUwsR0FDYk0sSUFBSUMsRUFBR0MsR0FDSCxNQUFNTCxhQUFFQSxHQUFpQkgsRUFFekIsR0FBSUMsSUFBVUEsRUFBTVEsU0FBU0QsSUFBV04sR0FBVUEsRUFBT08sU0FBU0QsR0FDOUQsT0FBT1IsRUFBSVEsR0FFWEwsRUFBYU8sSUFBSUYsSUFDakJMLEVBQWFRLElBQUlILEVBQU0sSUFBSVYsS0FHL0IsSUFBSSxJQUFJYyxLQUFZZixFQUFhLENBQzdCLE1BQU1jLEVBQU1SLEVBQWFVLElBQUlMLEdBQzdCRyxFQUFJRyxJQUFJRixHQUNSVCxFQUFhUSxJQUFJSCxFQUFNRyxHQUUzQixPQUFPWCxFQUFJUSxJQUVmRixJQUFJQyxFQUFHQyxFQUFNTyxHQUNULE1BQU1aLGFBQUVBLEdBQWlCSCxFQUd6QixHQUZBQSxFQUFJUSxHQUFRTyxFQUVSZCxJQUFVQSxFQUFNUSxTQUFTRCxJQUFXTixHQUFVQSxFQUFPTyxTQUFTRCxHQUM5RCxPQUFPLEVBRVgsR0FBR0wsRUFBYU8sSUFBSUYsR0FBTyxDQUN2QixNQUFNUSxFQUFhYixFQUFhVSxJQUFJTCxHQUNwQyxJQUFJLElBQUlTLEtBQWFELEVBQ2RDLEVBQVVDLFdBQ1RGLEVBQVdHLE9BQU9GLEdBRWxCQSxJQUlaLE9BQU8sTUFPZkwsU0FoRmEsU0FBU1EsR0FBS0MsUUFBRUEsR0FBVSxPQUN2QyxNQUFNQyxFQUFRLElBQUlqQixNQUFNZSxHQUNwQkcsTUFBTyxTQUFTQyxFQUFRQyxFQUFTQyxHQUM3QjdCLEVBQVlpQixJQUFJUSxHQUVoQkksRUFBU0MsTUFDTEMsU0FDSUMsS0FBTSxJQUFNaEMsRUFBWXNCLE9BQU9HLEdBQy9CUSxPQUFRLElBQU1qQyxFQUFZaUIsSUFBSVEsTUFJdEMsTUFBTVMsRUFBU1AsRUFBT0QsTUFBTUUsRUFBU0MsR0FFckMsT0FBR0ssYUFBa0JDLFFBQ1ZELEVBQ0ZFLEtBQUssS0FDRnBDLEVBQVlzQixPQUFPRyxLQUV0QlksTUFBTUMsSUFFSCxNQURBdEMsRUFBWXNCLE9BQU9HLEdBQ2JhLEtBR2R0QyxFQUFZc0IsT0FBT0csR0FDWlMsTUFLbkIsT0FER1YsR0FBV0MsSUFDUEEsR0FtRFBjLFFBaERZN0IsR0FBS0EsRUFBRVcsWUFBYSJ9
