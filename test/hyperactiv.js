!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.hyperactiv=t()}(this,function(){"use strict";const e=new Set;return{observe:function(t){return t.__observeMap=new Map,new Proxy(t,{get(o,n){const{__observeMap:s}=t;s.has(n)||s.set(n,new Set);for(let t of e){const e=s.get(n);e.add(t),s.set(n,e)}return t[n]},set(e,o,n){const{__observeMap:s}=t;if(t[o]=n,s.has(o)){const e=s.get(o);for(let t of e)t.__disposed?e.delete(t):t()}return!0}})},computed:function(t,o=!1){const n=new Proxy(t,{apply:function(t,o,s){e.add(n),s.push({capture:{stop:()=>e.delete(n),resume:()=>e.add(n)}});const r=t.apply(o,s);return r instanceof Promise?r.then(()=>{e.delete(n)}).catch(t=>{throw e.delete(n),t}):(e.delete(n),r)}});return o&&n(),n},dispose:e=>e.__disposed=!0}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHlwZXJhY3Rpdi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbXB1dGVkU2V0ID0gbmV3IFNldCgpXG5cbmNvbnN0IGNvbXB1dGVkID0gZnVuY3Rpb24oZnVuLCBhdXRvUnVuID0gZmFsc2UpIHtcbiAgICBjb25zdCBwcm94eSA9IG5ldyBQcm94eShmdW4sIHtcbiAgICAgICAgYXBwbHk6IGZ1bmN0aW9uKHRhcmdldCwgdGhpc0FyZywgYXJnc0xpc3QpIHtcbiAgICAgICAgICAgIGNvbXB1dGVkU2V0LmFkZChwcm94eSlcblxuICAgICAgICAgICAgYXJnc0xpc3QucHVzaCh7XG4gICAgICAgICAgICAgICAgY2FwdHVyZSA6e1xuICAgICAgICAgICAgICAgICAgICBzdG9wOiAoKSA9PiBjb21wdXRlZFNldC5kZWxldGUocHJveHkpLFxuICAgICAgICAgICAgICAgICAgICByZXN1bWU6ICgpID0+IGNvbXB1dGVkU2V0LmFkZChwcm94eSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0YXJnZXQuYXBwbHkodGhpc0FyZywgYXJnc0xpc3QpXG5cbiAgICAgICAgICAgIGlmKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkU2V0LmRlbGV0ZShwcm94eSlcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFNldC5kZWxldGUocHJveHkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29tcHV0ZWRTZXQuZGVsZXRlKHByb3h5KVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgaWYoYXV0b1J1bikgeyBwcm94eSgpIH1cbiAgICByZXR1cm4gcHJveHlcbn1cblxuY29uc3QgZGlzcG9zZSA9IF8gPT4gXy5fX2Rpc3Bvc2VkID0gdHJ1ZVxuXG5jb25zdCBvYnNlcnZlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgb2JqLl9fb2JzZXJ2ZU1hcCA9IG5ldyBNYXAoKVxuXG4gICAgcmV0dXJuIG5ldyBQcm94eShvYmosIHtcbiAgICAgICAgZ2V0KF8sIHByb3ApIHtcbiAgICAgICAgICAgIGNvbnN0IHsgX19vYnNlcnZlTWFwIH0gPSBvYmpcbiAgICAgICAgICAgIGlmKCFfX29ic2VydmVNYXAuaGFzKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgX19vYnNlcnZlTWFwLnNldChwcm9wLCBuZXcgU2V0KCkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvcihsZXQgY29tcHV0ZWQgb2YgY29tcHV0ZWRTZXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXQgPSBfX29ic2VydmVNYXAuZ2V0KHByb3ApXG4gICAgICAgICAgICAgICAgc2V0LmFkZChjb21wdXRlZClcbiAgICAgICAgICAgICAgICBfX29ic2VydmVNYXAuc2V0KHByb3AsIHNldClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmpbcHJvcF1cbiAgICAgICAgfSxcbiAgICAgICAgc2V0KF8sIHByb3AsIHZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCB7IF9fb2JzZXJ2ZU1hcCB9ID0gb2JqXG5cbiAgICAgICAgICAgIG9ialtwcm9wXSA9IHZhbHVlXG5cbiAgICAgICAgICAgIGlmKF9fb2JzZXJ2ZU1hcC5oYXMocHJvcCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXBlbmRlbnRzID0gX19vYnNlcnZlTWFwLmdldChwcm9wKVxuICAgICAgICAgICAgICAgIGZvcihsZXQgZGVwZW5kZW50IG9mIGRlcGVuZGVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZGVwZW5kZW50Ll9fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVudHMuZGVsZXRlKGRlcGVuZGVudClcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVudCgpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIG9ic2VydmUsXG4gICAgY29tcHV0ZWQsXG4gICAgZGlzcG9zZVxufSJdLCJuYW1lcyI6WyJjb21wdXRlZFNldCIsIlNldCIsIm9ic2VydmUiLCJvYmoiLCJfX29ic2VydmVNYXAiLCJNYXAiLCJQcm94eSIsIltvYmplY3QgT2JqZWN0XSIsIl8iLCJwcm9wIiwiaGFzIiwic2V0IiwiY29tcHV0ZWQiLCJnZXQiLCJhZGQiLCJ2YWx1ZSIsImRlcGVuZGVudHMiLCJkZXBlbmRlbnQiLCJfX2Rpc3Bvc2VkIiwiZGVsZXRlIiwiZnVuIiwiYXV0b1J1biIsInByb3h5IiwiYXBwbHkiLCJ0YXJnZXQiLCJ0aGlzQXJnIiwiYXJnc0xpc3QiLCJwdXNoIiwiY2FwdHVyZSIsInN0b3AiLCJyZXN1bWUiLCJyZXN1bHQiLCJQcm9taXNlIiwidGhlbiIsImNhdGNoIiwiZXJyIiwiZGlzcG9zZSJdLCJtYXBwaW5ncyI6InNMQUFBLE1BQU1BLEVBQWMsSUFBSUMsV0EyRXBCQyxRQXRDWSxTQUFTQyxHQUdyQixPQUZBQSxFQUFJQyxhQUFlLElBQUlDLElBRWhCLElBQUlDLE1BQU1ILEdBQ2JJLElBQUlDLEVBQUdDLEdBQ0gsTUFBTUwsYUFBRUEsR0FBaUJELEVBQ3JCQyxFQUFhTSxJQUFJRCxJQUNqQkwsRUFBYU8sSUFBSUYsRUFBTSxJQUFJUixLQUcvQixJQUFJLElBQUlXLEtBQVlaLEVBQWEsQ0FDN0IsTUFBTVcsRUFBTVAsRUFBYVMsSUFBSUosR0FDN0JFLEVBQUlHLElBQUlGLEdBQ1JSLEVBQWFPLElBQUlGLEVBQU1FLEdBRTNCLE9BQU9SLEVBQUlNLElBRWZGLElBQUlDLEVBQUdDLEVBQU1NLEdBQ1QsTUFBTVgsYUFBRUEsR0FBaUJELEVBSXpCLEdBRkFBLEVBQUlNLEdBQVFNLEVBRVRYLEVBQWFNLElBQUlELEdBQU8sQ0FDdkIsTUFBTU8sRUFBYVosRUFBYVMsSUFBSUosR0FDcEMsSUFBSSxJQUFJUSxLQUFhRCxFQUNkQyxFQUFVQyxXQUNURixFQUFXRyxPQUFPRixHQUVsQkEsSUFJWixPQUFPLE1BT2ZMLFNBMUVhLFNBQVNRLEVBQUtDLEdBQVUsR0FDckMsTUFBTUMsRUFBUSxJQUFJaEIsTUFBTWMsR0FDcEJHLE1BQU8sU0FBU0MsRUFBUUMsRUFBU0MsR0FDN0IxQixFQUFZYyxJQUFJUSxHQUVoQkksRUFBU0MsTUFDTEMsU0FDSUMsS0FBTSxJQUFNN0IsRUFBWW1CLE9BQU9HLEdBQy9CUSxPQUFRLElBQU05QixFQUFZYyxJQUFJUSxNQUl0QyxNQUFNUyxFQUFTUCxFQUFPRCxNQUFNRSxFQUFTQyxHQUVyQyxPQUFHSyxhQUFrQkMsUUFDVkQsRUFDRkUsS0FBSyxLQUNGakMsRUFBWW1CLE9BQU9HLEtBRXRCWSxNQUFNQyxJQUVILE1BREFuQyxFQUFZbUIsT0FBT0csR0FDYmEsS0FHZG5DLEVBQVltQixPQUFPRyxHQUNaUyxNQUtuQixPQURHVixHQUFXQyxJQUNQQSxHQTZDUGMsUUExQ1k1QixHQUFLQSxFQUFFVSxZQUFhIn0=
