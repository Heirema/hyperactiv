!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.hyperactiv=t()}(this,function(){"use strict";const e=new Set;return{observe:function(t,{props:n=null}={}){return t.__observeMap=new Map,new Proxy(t,{get(o,s){const{__observeMap:r}=t;if(n&&!n.includes(s))return t[s];r.has(s)||r.set(s,new Set);for(let t of e){const e=r.get(s);e.add(t),r.set(s,e)}return t[s]},set(e,o,s){const{__observeMap:r}=t;if(t[o]=s,n&&!n.includes(o))return!0;if(r.has(o)){const e=r.get(o);for(let t of e)t.__disposed?e.delete(t):t()}return!0}})},computed:function(t,{autoRun:n=!0}={}){const o=new Proxy(t,{apply:function(t,n,s){e.add(o),s.push({capture:{stop:()=>e.delete(o),resume:()=>e.add(o)}});const r=t.apply(n,s);return r instanceof Promise?r.then(()=>{e.delete(o)}).catch(t=>{throw e.delete(o),t}):(e.delete(o),r)}});return n&&o(),o},dispose:e=>e.__disposed=!0}});
