!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.hyperactiv=t()}(this,function(){"use strict";const e=new Set;return{observe:function(t){return t.__observeMap=new Map,new Proxy(t,{get(n,o){const{__observeMap:s}=t;s.has(o)||s.set(o,new Set);for(let t of e){const e=s.get(o);e.add(t),s.set(o,e)}return t[o]},set(e,n,o){const{__observeMap:s}=t;if(t[n]=o,s.has(n)){const e=s.get(n);for(let t of e)t.__disposed?e.delete(t):t()}return!0}})},computed:function(t,n=!1){const o=new Proxy(t,{apply:function(t,n,s){e.add(o);const r=t.apply(n,...s);return r instanceof Promise?r.then(function(){e.delete(o)}):(e.delete(o),r)}});return n&&o(),o},dispose:e=>e.__disposed=!0}});
