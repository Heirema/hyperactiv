!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.hyperactiv=t()}(this,function(){"use strict";const e=new Set;return{observe:function(t){return t.__observeMap=new Map,new Proxy(t,{get(o,n){const{__observeMap:s}=t;s.has(n)||s.set(n,new Set);for(let t of e){const e=s.get(n);e.add(t),s.set(n,e)}return t[n]},set(e,o,n){const{__observeMap:s}=t;if(t[o]=n,s.has(o)){const e=s.get(o);for(let t of e)t.__disposed?e.delete(t):t()}return!0}})},computed:function(t,o=!1){const n=new Proxy(t,{apply:function(t,o,s){e.add(n),s.push({capture:{stop:()=>e.delete(n),resume:()=>e.add(n)}});const r=t.apply(o,s);return r instanceof Promise?r.then(()=>{e.delete(n)}).catch(t=>{throw e.delete(n),t}):(e.delete(n),r)}});return o&&n(),n},dispose:e=>e.__disposed=!0}});
