!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.hyperactiv=t()}(this,function(){"use strict";const e=new Set;return{observe:function(t){return t.__observeMap=new Map,new Proxy(t,{get(n,o){const{__observeMap:s}=t;s.has(o)||s.set(o,new Set);for(let t of e){const e=s.get(o);e.add(t),s.set(o,e)}return t[o]},set(e,n,o){const{__observeMap:s}=t;if(t[n]=o,s.has(n)){const e=s.get(n);for(let t of e)t.__disposed?e.delete(t):t()}return!0}})},computed:function(t,n=!1){const o=new Proxy(t,{apply:function(t,n,s){e.add(o);const r=t.apply(n,...s);return r instanceof Promise?r.then(function(){e.delete(o)}):(e.delete(o),r)}});return n&&o(),o},dispose:e=>e.__disposed=!0}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHlwZXJhY3Rpdi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbXB1dGVkU2V0ID0gbmV3IFNldCgpXG5cbmNvbnN0IGNvbXB1dGVkID0gZnVuY3Rpb24oZnVuLCBhdXRvUnVuID0gZmFsc2UpIHtcbiAgICBjb25zdCBwcm94eSA9IG5ldyBQcm94eShmdW4sIHtcbiAgICAgICAgYXBwbHk6IGZ1bmN0aW9uKHRhcmdldCwgdGhpc0FyZywgYXJnc0xpc3QpIHtcbiAgICAgICAgICAgIGNvbXB1dGVkU2V0LmFkZChwcm94eSlcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGFyZ2V0LmFwcGx5KHRoaXNBcmcsIC4uLmFyZ3NMaXN0KVxuXG4gICAgICAgICAgICBpZihyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKGZ1bmN0aW9uKCkgeyBjb21wdXRlZFNldC5kZWxldGUocHJveHkpIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbXB1dGVkU2V0LmRlbGV0ZShwcm94eSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuICAgIGlmKGF1dG9SdW4pIHsgcHJveHkoKSB9XG4gICAgcmV0dXJuIHByb3h5XG59XG5cbmNvbnN0IGRpc3Bvc2UgPSBfID0+IF8uX19kaXNwb3NlZCA9IHRydWVcblxuY29uc3Qgb2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIG9iai5fX29ic2VydmVNYXAgPSBuZXcgTWFwKClcblxuICAgIHJldHVybiBuZXcgUHJveHkob2JqLCB7XG4gICAgICAgIGdldChfLCBwcm9wKSB7XG4gICAgICAgICAgICBjb25zdCB7IF9fb2JzZXJ2ZU1hcCB9ID0gb2JqXG4gICAgICAgICAgICBpZighX19vYnNlcnZlTWFwLmhhcyhwcm9wKSkge1xuICAgICAgICAgICAgICAgIF9fb2JzZXJ2ZU1hcC5zZXQocHJvcCwgbmV3IFNldCgpKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IobGV0IGNvbXB1dGVkIG9mIGNvbXB1dGVkU2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0ID0gX19vYnNlcnZlTWFwLmdldChwcm9wKVxuICAgICAgICAgICAgICAgIHNldC5hZGQoY29tcHV0ZWQpXG4gICAgICAgICAgICAgICAgX19vYnNlcnZlTWFwLnNldChwcm9wLCBzZXQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqW3Byb3BdXG4gICAgICAgIH0sXG4gICAgICAgIHNldChfLCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgeyBfX29ic2VydmVNYXAgfSA9IG9ialxuXG4gICAgICAgICAgICBvYmpbcHJvcF0gPSB2YWx1ZVxuXG4gICAgICAgICAgICBpZihfX29ic2VydmVNYXAuaGFzKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVwZW5kZW50cyA9IF9fb2JzZXJ2ZU1hcC5nZXQocHJvcClcbiAgICAgICAgICAgICAgICBmb3IobGV0IGRlcGVuZGVudCBvZiBkZXBlbmRlbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGRlcGVuZGVudC5fX2Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBlbmRlbnRzLmRlbGV0ZShkZXBlbmRlbnQpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBlbmRlbnQoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBvYnNlcnZlLFxuICAgIGNvbXB1dGVkLFxuICAgIGRpc3Bvc2Vcbn0iXSwibmFtZXMiOlsiY29tcHV0ZWRTZXQiLCJTZXQiLCJvYnNlcnZlIiwib2JqIiwiX19vYnNlcnZlTWFwIiwiTWFwIiwiUHJveHkiLCJbb2JqZWN0IE9iamVjdF0iLCJfIiwicHJvcCIsImhhcyIsInNldCIsImNvbXB1dGVkIiwiZ2V0IiwiYWRkIiwidmFsdWUiLCJkZXBlbmRlbnRzIiwiZGVwZW5kZW50IiwiX19kaXNwb3NlZCIsImRlbGV0ZSIsImZ1biIsImF1dG9SdW4iLCJwcm94eSIsImFwcGx5IiwidGFyZ2V0IiwidGhpc0FyZyIsImFyZ3NMaXN0IiwicmVzdWx0IiwiUHJvbWlzZSIsInRoZW4iLCJkaXNwb3NlIl0sIm1hcHBpbmdzIjoic0xBQUEsTUFBTUEsRUFBYyxJQUFJQyxXQTZEcEJDLFFBdENZLFNBQVNDLEdBR3JCLE9BRkFBLEVBQUlDLGFBQWUsSUFBSUMsSUFFaEIsSUFBSUMsTUFBTUgsR0FDYkksSUFBSUMsRUFBR0MsR0FDSCxNQUFNTCxhQUFFQSxHQUFpQkQsRUFDckJDLEVBQWFNLElBQUlELElBQ2pCTCxFQUFhTyxJQUFJRixFQUFNLElBQUlSLEtBRy9CLElBQUksSUFBSVcsS0FBWVosRUFBYSxDQUM3QixNQUFNVyxFQUFNUCxFQUFhUyxJQUFJSixHQUM3QkUsRUFBSUcsSUFBSUYsR0FDUlIsRUFBYU8sSUFBSUYsRUFBTUUsR0FFM0IsT0FBT1IsRUFBSU0sSUFFZkYsSUFBSUMsRUFBR0MsRUFBTU0sR0FDVCxNQUFNWCxhQUFFQSxHQUFpQkQsRUFJekIsR0FGQUEsRUFBSU0sR0FBUU0sRUFFVFgsRUFBYU0sSUFBSUQsR0FBTyxDQUN2QixNQUFNTyxFQUFhWixFQUFhUyxJQUFJSixHQUNwQyxJQUFJLElBQUlRLEtBQWFELEVBQ2RDLEVBQVVDLFdBQ1RGLEVBQVdHLE9BQU9GLEdBRWxCQSxJQUlaLE9BQU8sTUFPZkwsU0E1RGEsU0FBU1EsRUFBS0MsR0FBVSxHQUNyQyxNQUFNQyxFQUFRLElBQUloQixNQUFNYyxHQUNwQkcsTUFBTyxTQUFTQyxFQUFRQyxFQUFTQyxHQUM3QjFCLEVBQVljLElBQUlRLEdBRWhCLE1BQU1LLEVBQVNILEVBQU9ELE1BQU1FLEtBQVlDLEdBRXhDLE9BQUdDLGFBQWtCQyxRQUNWRCxFQUFPRSxLQUFLLFdBQWE3QixFQUFZbUIsT0FBT0csTUFFbkR0QixFQUFZbUIsT0FBT0csR0FDWkssTUFLbkIsT0FER04sR0FBV0MsSUFDUEEsR0E2Q1BRLFFBMUNZdEIsR0FBS0EsRUFBRVUsWUFBYSJ9
