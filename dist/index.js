!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.hyperactiv=t()}(this,function(){"use strict";const e=new Set;return{observe:function(t,{props:n=null,ignore:o=null}={}){return t.__observeMap=new Map,new Proxy(t,{get(s,r){const{__observeMap:u}=t;if(n&&!n.includes(r)||o&&o.includes(r))return t[r];u.has(r)||u.set(r,new Set);for(let t of e){const e=u.get(r);e.add(t),u.set(r,e)}return t[r]},set(e,s,r){const{__observeMap:u}=t;if(t[s]=r,n&&!n.includes(s)||o&&o.includes(s))return!0;if(u.has(s)){const e=u.get(s);for(let t of e)t.__disposed?e.delete(t):t()}return!0}})},computed:function(t,{autoRun:n=!0}={}){const o=new Proxy(t,{apply:function(t,n,s){e.add(o),s.push({capture:{stop:()=>e.delete(o),resume:()=>e.add(o)}});const r=t.apply(n,s);return r instanceof Promise?r.then(()=>{e.delete(o)}).catch(t=>{throw e.delete(o),t}):(e.delete(o),r)}});return n&&o(),o},dispose:e=>e.__disposed=!0}});
